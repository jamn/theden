$(document).on("tap",".home-link",function(){window.location.href="./site";});$(document).on("tap","#newAddress",function(){$("html, body").animate({scrollTop:$("#address").offset().top},2000);
if($(".google-map").is(":visible")){}else{$(".google-map").slideDown();}});$(document).on("tap",".address",function(){if($(".google-map").is(":visible")){$(".google-map").slideUp();
}else{$(".google-map").slideDown();}});$(document).on("tap",".google",function(){var b="https://local.google.com/maps/ms?msid=203990239811952052030.0004de4cdb5c11e4fc186&msa=0";
var a="Directions to The Den";window.open(b,a,"height=600,width=900");});$(document).on("tap","#bookNowButton",function(){var b=$(this).attr("disabled");
if(b!="disabled"){disableButton(this);var c={u:"kp"};var a="services";getPageContent(this,c,a);}});$(document).on("tap",".service",function(){var d=$(this).attr("disabled");
if(d!="disabled"){disableButton(this);var a=this.getAttribute("service");var c=$("#chooseDate").val();var e={s:a,d:c};var b="timeSlots";getPageContent(this,e,b);
}});$(document).on("tap",".time-slot",function(){var f=$(this).attr("disabled");if(f!="disabled"){disableButton(this);var e=this.getAttribute("starttime");
var a=$("#recurringAppointmentCheckbox").is(":checked");var d=$("#repeatDuration").val();var c=$("#repeatNumberOfAppointments").val();var g={d:e,r:a,dur:d,num:c};
var b="loginForm";getPageContent(this,g,b);}});$(document).on("tap","#registerLink",function(){$(".right-divider").show();$("#password-Book").show();$("#resetPassword").show();
$("#showLoginForm").show();$(".left-divider").hide();$("#registerLink").hide();$(".new-user").slideDown();$(".errorDetails").slideUp();$("#loginButton").attr("sendPasswordResetEmail",false);
$("#loginButton").attr("attemptPasswordReset",false);$("#loginButton").removeClass("errorButton");$("#loginButton .as-button-label").text("Register & Book");
$(".reminders").slideDown();togglePhoneNumber();});$(document).on("tap","#resetPassword",function(){$(".right-divider").hide();$(".left-divider").show();
$("#password-Book").hide();$("#resetPassword").hide();$("#registerLink").show();$("#showLoginForm").show();$(".new-user").slideUp();$(".errorDetails").slideUp();
$("#phoneNumber").slideUp();$(".reminders").slideUp();$("#loginButton").attr("sendPasswordResetEmail",true);$("#loginButton").attr("attemptPasswordReset",false);
$("#loginButton").removeClass("errorButton");$("#loginButton .as-button-label").text("Send Reset Email");});$(document).on("tap","#showLoginForm",function(){$(".right-divider").hide();
$(".left-divider").show();$("#password-Book").show();$("#resetPassword").show();$("#registerLink").show();$("#showLoginForm").hide();$(".new-user").slideUp();
$(".errorDetails").slideUp();$("#loginButton").attr("sendPasswordResetEmail",false);$("#loginButton").attr("attemptPasswordReset",false);$("#loginButton").removeClass("errorButton");
$("#loginButton .as-button-label").text("Book Appointment");$(".reminders").slideDown();togglePhoneNumber();});function logout(){$(".user-details").slideUp();
$(".logged-in").slideDown();$(".new-user").slideUp();$("#loggedIn").val("false");}function togglePhoneNumber(){if($("#textMessageReminder").is(":checked")){$("#phoneNumber").slideDown();
}else{$("#phoneNumber").slideUp();}}$(document).on("tap","#loginButton",function(){var a=$(this).attr("disabled");$("#loginButton").removeClass("error-button");
if(a!="disabled"){$(this).attr("disabled","disabled");if($(this).attr("sendPasswordResetEmail")==="true"){sendPasswordResetEmail();}else{if($(this).attr("attemptPasswordReset")==="true"){attemptPasswordReset();
}else{bookAppointment();}}}});$(document).on("tap","#cancelAppointmentLoginButton",function(){var a=$(this).attr("disabled");$("#cancelAppointmentLoginButton").removeClass("error-button");
if(a!="disabled"){$(this).attr("disabled","disabled");cancelAppointment();}});$(document).on("keypress","#password-Book",function(){if(event.keyCode===13){$("#loginButton").removeClass("error-button");
bookAppointment();}});$(document).on("keypress","#password-Cancel",function(){if(event.keyCode===13){$("#cancelAppointmentLoginButton").removeClass("error-button");
cancelAppointment();}});$(document).on("keypress","#verifyNewPassword",function(){if(event.keyCode===13){$("#loginButton").removeClass("error-button");
attemptPasswordReset();}});function sendPasswordResetEmail(){var a=$("#email").val();$("#loginButton .as-button-label").hide();$("#loginButton .spinner").show();
var b=$("body").attr("baseUrl");$.ajax({type:"POST",url:b+"site/sendPasswordResetEmail",data:{e:a}}).done(function(c){processResults(c);});}function attemptPasswordReset(){var c=$("#newPassword").val();
var b=$("#verifyNewPassword").val();$("#loginButton .as-button-label").hide();$("#loginButton .spinner").show();var a=$("body").attr("baseUrl");$.ajax({type:"POST",url:a+"site/attemptPasswordReset",data:{p1:c,p2:b}}).done(function(d){processResults(d);
});}function bookAppointment(){var b=$("#loggedIn").val();var d=$("#email").val();var f=$("#password-Book").val();var e=$("#firstName").val();var g=$("#lastName").val();
var j=$("#phoneNumber").val();var h=$("#emailReminder").is(":checked");var a=$("#textMessageReminder").is(":checked");var i=$("#rememberMe").is(":checked");
$("#loginButton .as-button-label").hide();$("#loginButton .spinner").show();var c=$("body").attr("baseUrl");$.ajax({type:"POST",url:c+"site/bookAppointment",data:{loggedIn:b,e:d,p:f,f:e,l:g,ph:j,eRmndr:h,tRmndr:a,remember:i}}).done(function(k){processResults(k);
});}function processResults(b){var c=b.search('"success":false');if(c>-1){var a=JSON&&JSON.parse(b)||$.parseJSON(b);$("#loginButton .spinner").hide();$("#loginButton .as-button-label").show();
$("#loginButton").attr("disabled",false);$("#loginButton").addClass("error-button").fadeIn();$(".errorDetails").html(a.errorMessage);$(".errorDetails").slideDown();
}else{loadPageContent("loginForm","confirmation",b);}}function processCancelAppointmentResults(b){var c=b.search('"success":false');if(c>-1){var a=JSON&&JSON.parse(b)||$.parseJSON(b);
$("#cancelAppointmentLoginButton .spinner").hide();$("#cancelAppointmentLoginButton .as-button-label").show();$("#cancelAppointmentLoginButton").attr("disabled",false);
$("#cancelAppointmentLoginButton").addClass("error-button");$(".errorDetails").html(a.errorMessage);$(".errorDetails").slideDown();}else{loadPageContent("loginForm","confirmation",b);
}}function cancelAppointment(){var c=$("#cancelAppointmentLoginButton");var d=c.attr("disabled");c.removeClass("error-button");if(d!="disabled"){c.attr("disabled","disabled");
console.log("called cancel appointment.");var b=$("#email").val();var a=$("#password-Cancel").val();$("#cancelAppointmentLoginButton .as-button-label").hide();
$("#cancelAppointmentLoginButton .spinner").show();var e=$("body").attr("baseUrl");$.ajax({type:"POST",url:e+"site/cancelAppointment",data:{e:b,p:a}}).done(function(f){processCancelAppointmentResults(f);
});}}function disableButton(a){$(a).attr("disabled","disabled");$(a).find(".as-button-label").hide();$(a).find(".spinner").show();}function getPageContent(b,f,a){var c=$(b).closest(".page").attr("page");
if(typeof c!="undefined"&&typeof a!="undefined"){var d=$("body").attr("baseUrl");var e="get"+a.charAt(0).toUpperCase()+a.slice(1);$.ajax({type:"POST",url:d+"site/"+e,data:f}).done(function(g){loadPageContent(c,a,g);
}).fail(function(){$(b).html("Error");$(b).addClass("error-button");});}}function loadPageContent(c,a,b){$(".main-content").css("background-color","white");
$('.main-content .page[page="'+c+'"]').slideUp();$('.main-content .page[page="'+a+'"]').append(b);$('.main-content .page[page="'+a+'"]').slideDown();}
var weekday=new Array(7);weekday[0]="Sunday";weekday[1]="Monday";weekday[2]="Tuesday";weekday[3]="Wednesday";weekday[4]="Thursday";weekday[5]="Friday";
weekday[6]="Saturday";$(document).on("tap",".home",function(){window.location.href="/";});$(document).on("tap",".jackson",function(){$(this).fadeOut();
});$(document).ready(function(){$("#newAddress").click(function(){$("html, body").animate({scrollTop:$("#address").offset().top},2000);if($(".google-map").is(":visible")){}else{$(".google-map").slideDown();
}});$("#chooseDate").datepicker({onSelect:function(a){var a=$("#chooseDate").val();var b=$("body").attr("baseUrl");$.ajax({type:"POST",url:b+"site/getAvailableTimes",data:{d:a}}).done(function(c){var f=c.search('"success":false');
if(f===-1){var e=new Date(a);$("#dateText").empty();$("#dateText").append(weekday[e.getDay()]);$("#timeSlots").empty();$("#timeSlots").append(c);}});},minDate:0,beforeShowDay:function(b){var a=b.getDay();
return[(a!=6&&a!=0)];}});$("#chooseDate").datepicker("setDate",new Date());$("#recurringAppointment").click(function(){if($(this).is(":checked")){$("#recurringAppointmentOptions").slideDown();
}else{$("#recurringAppointmentOptions").slideUp();}});$(".address").click(function(){if($(".google-map").is(":visible")){$(".google-map").slideUp();}else{$(".google-map").slideDown();
}});$(".google-map").click(function(){var b="https://local.google.com/maps/ms?msid=203990239811952052030.0004de4cdb5c11e4fc186&msa=0";var a="Directions to The Den";
window.open(b,a,"height=600,width=900");});});$(document).on("tap","#bookNowButton",function(){var b=$(this).attr("disabled");if(b!="disabled"){disableButton(this);
var c={u:"kp"};var a="services";getPageContent(this,c,a);}});$(document).on("tap",".service",function(){var d=$(this).attr("disabled");if(d!="disabled"){disableButton(this);
var a=this.getAttribute("service");var c=$("#chooseDate").val();var e={s:a,d:c};var b="timeSlots";getPageContent(this,e,b);}});$(document).on("tap",".time-slot",function(){var f=$(this).attr("disabled");
if(f!="disabled"){disableButton(this);var e=this.getAttribute("starttime");var a=$("#recurringAppointment").is(":checked");var d=$("#repeatDuration").val();
var c=$("#repeatNumberOfAppointments").val();var g={d:e,r:a,dur:d,num:c};var b="login";getPageContent(this,g,b);}});$(document).on("tap","#registerLink",function(){$(".right-divider").show();
$("#password").show();$("#resetPassword").show();$("#showLoginForm").show();$(".left-divider").hide();$("#registerLink").hide();$(".new-user").slideDown();
$(".new-user").addClass("animated fadeIn");$(".errorDetails").slideUp();$("#loginButton").attr("sendPasswordResetEmail",false);$("#loginButton").attr("attemptPasswordReset",false);
$("#loginButton").removeClass("errorButton animated fadeIn");$("#loginButton .as-button-label").text("Register & Book");});$(document).on("tap","#resetPassword",function(){$(".right-divider").hide();
$(".left-divider").show();$("#password").hide();$("#resetPassword").hide();$("#registerLink").show();$("#showLoginForm").show();$(".new-user").slideUp();
$(".new-user").removeClass("animated fadeIn");$(".errorDetails").slideUp();$("#loginButton").attr("sendPasswordResetEmail",true);$("#loginButton").attr("attemptPasswordReset",false);
$("#loginButton").removeClass("errorButton animated fadeIn");$("#loginButton .as-button-label").text("Send Reset Email");});$(document).on("tap","#showLoginForm",function(){$(".right-divider").hide();
$(".left-divider").show();$("#password").show();$("#resetPassword").show();$("#registerLink").show();$("#showLoginForm").hide();$(".new-user").slideUp();
$(".new-user").removeClass("animated fadeIn");$(".errorDetails").slideUp();$("#loginButton").attr("sendPasswordResetEmail",false);$("#loginButton").attr("attemptPasswordReset",false);
$("#loginButton").removeClass("errorButton animated fadeIn");$("#loginButton .as-button-label").text("Book Appointment");});$(document).on("tap","#loginButton",function(){var a=$(this).attr("disabled");
$("#loginButton").removeClass("errorButton animated fadeIn");if(a!="disabled"){$(this).attr("disabled","disabled");if($(this).attr("sendPasswordResetEmail")==="true"){sendPasswordResetEmail();
}else{if($(this).attr("attemptPasswordReset")==="true"){attemptPasswordReset();}else{bookAppointment();}}}});$(document).on("keypress","#password",function(){if(event.keyCode===13){$("#loginButton").removeClass("errorButton animated fadeIn");
bookAppointment();}});$(document).on("keypress","#password2",function(){if(event.keyCode===13){$("#cancelAppointmentLoginButton").removeClass("errorButton animated fadeIn");
cancelAppointment();}});$(document).on("keypress","#verifyNewPassword",function(){if(event.keyCode===13){$("#loginButton").removeClass("errorButton animated fadeIn");
attemptPasswordReset();}});function sendPasswordResetEmail(){var a=$("#email").val();$("#loginButton .as-button-label").hide();$("#loginButton .spinner").show();
var b=$("body").attr("baseUrl");$.ajax({type:"POST",url:b+"site/sendPasswordResetEmail",data:{e:a}}).done(function(c){processResults(c);});}function attemptPasswordReset(){var c=$("#newPassword").val();
var b=$("#verifyNewPassword").val();$("#loginButton .as-button-label").hide();$("#loginButton .spinner").show();var a=$("body").attr("baseUrl");$.ajax({type:"POST",url:a+"site/attemptPasswordReset",data:{p1:c,p2:b}}).done(function(d){processResults(d);
});}function bookAppointment(){var d=$("#email").val();var g=$("#email2").val();var c=$("#password").val();var e=$("#firstName").val();var b=$("#lastName").val();
var a=$("#phoneNumber").val();$("#loginButton .as-button-label").hide();$("#loginButton .spinner").show();var f=$("body").attr("baseUrl");$.ajax({type:"POST",url:f+"site/bookAppointment",data:{e:d,hp:g,p:c,f:e,l:b,ph:a}}).done(function(h){processResults(h);
});}function processResults(b){var c=b.search('"success":false');if(c>-1){var a=JSON&&JSON.parse(b)||$.parseJSON(b);$("#loginButton .spinner").hide();$("#loginButton .as-button-label").show();
$("#loginButton").attr("disabled",false);$("#loginButton").addClass("errorButton animated fadeIn");$(".errorDetails").html(a.errorMessage);$(".errorDetails").slideDown();
}else{$(".login").removeClass("animated fadeInRightBig");$(".login").addClass("animated fadeOut");$(".login").slideUp();$(".main-content-area").removeClass("animated fadeInRightBig");
$(".main-content-area").addClass("animated fadeOut");$(".main-content-area").slideUp();$(".confirmation").append(b);$(".confirmation").slideDown();$(".confirmation").removeClass("animated fadeOut");
$(".confirmation").addClass("animated fadeInRightBig");}}function processCancelAppointmentResults(b){var c=b.search('"success":false');if(c>-1){var a=JSON&&JSON.parse(b)||$.parseJSON(b);
$("#cancelAppointmentLoginButton .spinner").hide();$("#cancelAppointmentLoginButton .as-button-label").show();$("#cancelAppointmentLoginButton").attr("disabled",false);
$("#cancelAppointmentLoginButton").addClass("errorButton animated fadeIn");$(".errorDetails").html(a.errorMessage);$(".errorDetails").slideDown();}else{$(".login").removeClass("animated fadeInRightBig");
$(".login").addClass("animated fadeOut");$(".login").slideUp();$(".main-content-area").removeClass("animated fadeInRightBig");$(".main-content-area").addClass("animated fadeOut");
$(".main-content-area").slideUp();$(".confirmation").append(b);$(".confirmation").slideDown();$(".confirmation").removeClass("animated fadeOut");$(".confirmation").addClass("animated fadeInRightBig");
}}function cancelAppointment(){var c=$("#cancelAppointmentLoginButton");var d=c.attr("disabled");c.removeClass("errorButton animated fadeIn");if(d!="disabled"){c.attr("disabled","disabled");
console.log("called cancel appointment.");var b=$("#email").val();var a=$("#password2").val();$("#cancelAppointmentLoginButton .as-button-label").hide();
$("#cancelAppointmentLoginButton .spinner").show();var e=$("body").attr("baseUrl");$.ajax({type:"POST",url:e+"site/cancelAppointment",data:{e:b,p:a}}).done(function(f){processCancelAppointmentResults(f);
});}}function disableButton(a){$(a).attr("disabled","disabled");}function getPageContent(b,f,a){var c=$(b).closest(".page").attr("page");if(typeof c!="undefined"&&typeof a!="undefined"){$(b).find(".as-button-label").hide();
$(b).find(".spinner").show();var d=$("body").attr("baseUrl");var e="get"+a.charAt(0).toUpperCase()+a.slice(1);$.ajax({type:"POST",url:d+"site/"+e,data:f}).done(function(g){var h=g.search('"success":false');
if(h===-1){$('.main-content .page[page="'+c+'"]').removeClass("fadeIn");$('.main-content .page[page="'+c+'"]').addClass("animated fadeOut");$('.main-content .page[page="'+c+'"]').slideUp();
$('.main-content .page[page="'+a+'"]').html(g);$('.main-content .page[page="'+a+'"]').slideDown();$('.main-content .page[page="'+a+'"]').removeClass("animated fadeOut");
$('.main-content .page[page="'+a+'"]').addClass("animated fadeInRightBig");}else{$(b).addClass("errorButton animated fadeIn");$(b).removeClass("errorButton animated fadeIn");
}});}}
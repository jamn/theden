$(document).ready(function(){getSection("fourteenDayView");});function getTimeSlotOptions(){var a=$("#services").val();var c=$("#dateOfAppointment").val();
var b=$("body").attr("baseUrl");if(a!="Choose a service..."){$.ajax({type:"POST",url:b+"/getTimeSlotOptions",data:{sId:a,aDate:c}}).done(function(d){if(d.indexOf("ERROR")>-1){$("#bookForClientButton").html("Error");
$("#bookForClientButton").addClass("error-button");}else{$("#timeSlots").html(d);$("#bookForClientButton").html("Book Appointment");$("#bookForClientButton").removeClass("error-button");
}});}}function getTimeSlotOptionsForRescheduledAppointment(c){var a=$("#servicesForRescheduledAppointment-"+c).val();var d=$("#dateOfRescheduledAppointment-"+c).val();
var b=$("body").attr("baseUrl");if(a!="Choose a service..."){$.ajax({type:"POST",url:b+"/getTimeSlotOptions",data:{sId:a,aDate:d}}).done(function(e){if(e.indexOf("ERROR")>-1){$("#timeSlotsForRescheduledAppointment-"+c).html("<option>No times available</option>");
}else{$("#timeSlotsForRescheduledAppointment-"+c).html(e);}});}}$(document).on("tap",".main",function(){var a=($(".navbar-collapse").attr("class").indexOf("in")>=0);
if(a){$(".navbar-toggle").click();}});$(document).on("tap",".nav a",function(b){var a=$(this).attr("href");if(a==="#logout"){window.location.href="./access/logout";
}else{getSection(a);$(".navbar-toggle").click();}});function getSection(b){$("#mask").fadeIn();var a=$("body").attr("baseUrl");$.ajax({type:"POST",url:a+"/getSection",data:{section:b}}).done(function(c){$(".active").removeClass("active");
$('a[href="#'+b+'"]').parent().addClass("active");$(".main").html(c);$("#mask").fadeOut();});}$(document).on("tap","#addClient",function(b){var a=$("body").attr("baseUrl");
$.ajax({type:"POST",url:a+"/getClientDataForm"}).done(function(c){if(c.indexOf("ERROR")>-1){alert("Dang... you broke it.");}else{$("#lastNameFilters").slideUp();
$("#clientsDetailsSelector").slideUp();$("#clientDetails").slideUp();$("#addClient").fadeOut();$("#clientInfoForm").html(c).slideDown();}});});$(document).on("tap","#editClient",function(c){var a=$("#clientsDetailsSelector").val();
var b=$("body").attr("baseUrl");$.ajax({type:"POST",url:b+"/getClientDataForm",data:{cId:a}}).done(function(d){if(d.indexOf("ERROR")>-1){alert("Dang... you broke it.");
}else{$("#lastNameFilters").slideUp();$("#clientsDetailsSelector").slideUp();$("#clientDetails").slideUp();$("#addClient").fadeOut();$("#clientInfoForm").html(d).slideDown();
}});});$(document).on("tap",".last-name-filter",function(b){var a=$(b.currentTarget).attr("value");$("#clientsDetailsSelector").slideDown();if(a==="Reset"){getClientSelectMenuData();
$(".reset-search").fadeOut();}else{$(".reset-search").fadeIn();getClientSelectMenuData(a);}});function getClientSelectMenuData(a){var b=$("body").attr("baseUrl");
$.ajax({type:"POST",url:b+"/getClientsSelectMenu",data:{lastNameStartsWith:a}}).done(function(c){var d=c.search('"success":false');if(d===-1){$("#clientsDetailsSelector").html(c);
}});}$(document).on("tap","#saveClientButton",function(c){var d=$("#e").val();var a=$("#e2").val();var h=$("#p").val();var g=$("#f").val();var i=$("#l").val();
var j=$("#ph").val();var f=$("#cId").val();if(d&&h&&g&&i){$("#saveClientButton .label").hide();$("#saveClientButton .spinner").show();var b=$("body").attr("baseUrl");
$.ajax({type:"POST",url:b+"/saveClient",data:{e:d,hp:a,p:h,f:g,l:i,ph:j,cId:f}}).done(function(e){var k=e.search('"success":false');if(k===-1){hideClientRegistrationForm();
alert("User saved!");}});}});$(document).on("tap","#cancelClientRegistrationButton",function(a){hideClientRegistrationForm();});function hideClientRegistrationForm(){$("#clientInfoForm").slideUp();
$("#clientsDetailsSelector").slideDown();$("#lastNameFilters").slideDown();$("#clientDetails").slideDown();$("#addClient").fadeIn();}$(document).on("change","#clientsDetailsSelector",function(){$(this).slideUp();
$(".reset-search").fadeIn();var a=$(this).val();var b=$("body").attr("baseUrl");$.ajax({type:"POST",url:b+"/getClientDetails",data:{cId:a}}).done(function(c){var d=c.search('"success":false');
if(d===-1){$("#clientDetails").html(c).fadeIn();}});});$(document).on("tap","#saveTextButton",function(c){var b=$("#homepageText").val();var a=$("body").attr("baseUrl");
$.ajax({type:"POST",url:a+"/saveHomepageMessage",data:{m:b}});});$(document).on("tap","#saveClientNotesButton",function(c){var a=encodeURIComponent($("#clientNotes").val());
var b=$("body").attr("baseUrl");$.ajax({type:"POST",url:b+"/saveClientNotes",data:{n:a}});});$(document).on("tap","#blockOffTimeButton",function(d){var a=$("#chooseDateToBlockOff").val();
var j=$("#fromHour").val();var g=$("#fromMinute").val();var k=$("#fromMorningOrAfternoon").val();var f=$("#toHour").val();var l=$("#toMinute").val();var b=$("#toMorningOrAfternoon").val();
var i=j+":"+g+k;var h=f+":"+l+b;$("#blockOffTimeButton").html($("#waitingSpinner").html());var c=$("body").attr("baseUrl");$.ajax({type:"POST",url:c+"/blockOffTime",data:{date:a,from:i,to:h}}).done(function(e){var m=JSON.parse(e);
if(m.success===true){$("#blockOffTimeButton").html("Success");$("#blockOffTimeButton").removeClass("error-button");}else{$("#blockOffTimeButton").html("Error");
$("#blockOffTimeButton").addClass("error-button");}});});$(document).on("tap","#blockOffDaysButton",function(b){var d=$("#fromWholeDay").val();var c=$("#toWholeDay").val();
$(this).html($("#waitingSpinner").html());var a=$("body").attr("baseUrl");$.ajax({type:"POST",url:a+"/blockOffWholeDay",data:{from:d,to:c}}).done(function(e){var f=JSON.parse(e);
if(f.success===true){$("#blockOffDaysButton").html("Success");$("#blockOffDaysButton").removeClass("error-button");}else{$("#blockOffDaysButton").html("Error");
$("#blockOffDaysButton").addClass("error-button");}});});$(document).on("tap",".blocked-time",function(c){var b=$(this).find("input:checkbox");var a=$(this);
if(c.target.type!=="checkbox"){$(b).trigger("click");}var d=$(b).is(":checked");if(d===true){$(a).addClass("deleted");}else{$(a).removeClass("deleted");
}});$(document).on("tap","#deleteBlockedTimeslotsButton",function(c){var a=$("#deleteBlockedTimeslotsButton");$(a).html($("#waitingSpinner").html());var b=$("body").attr("baseUrl");
$(".blocked-timeslots-table tr:hidden").remove();$.ajax({type:"POST",url:b+"/clearBlockedTime",data:$("#blockedTimesForm").serialize()}).done(function(d){var e=JSON.parse(d);
if(e.success===true){$(a).html("Success");$(a).removeClass("error-button");var g=e.deletedTimeslots;var h=g.length;for(var f=0;f<h;f++){$("#blockedTime"+g[f]).fadeOut("slow");
}}else{$(a).html("Error");$(a).addClass("error-button");}});});$(document).on("tap","#recurringAppointment",function(){var a=$(".recurringAppointmentAdminOptions");
if($(a).is(":visible")){$(a).fadeOut();}else{$(a).fadeIn();}});$(document).on("change","#services",function(){getTimeSlotOptions();});$(document).on("change","#dateOfAppointment",function(){getTimeSlotOptions();
});function getRescheduleOptions(a){var b=$("body").attr("baseUrl");$.ajax({type:"POST",url:b+"/getRescheduleOptions",data:{aId:a}}).done(function(c){if(c.indexOf("ERROR")===-1){$("#edit-appointment-options").html(c);
$("#dateOfRescheduledAppointment-"+a).datepicker({minDate:0});$("#dateOfRescheduledAppointment-"+a).datepicker("setDate",new Date());$("#servicesForRescheduledAppointment-"+a).on("change",function(){getTimeSlotOptionsForRescheduledAppointment(a);
});$("#dateOfRescheduledAppointment-"+a).on("change",function(){getTimeSlotOptionsForRescheduledAppointment(a);});$("#rescheduleButton-"+a).on("tap",function(){var e=$("#servicesForRescheduledAppointment-"+a).val();
var f=$("#dateOfRescheduledAppointment-"+a).val();var d=$("#timeSlotsForRescheduledAppointment-"+a).val();$("#rescheduleButton-"+a).html($(".spinner").html());
$.ajax({type:"POST",url:b+"/rescheduleAppointment",data:{aId:a,sId:e,aDate:f,sTime:d}}).done(function(g){var h=JSON.parse(g);if(h.success===true){$("#rescheduleButton-"+a).html("Success");
$("#rescheduleButton-"+a).removeClass("error-button");setTimeout(function(){$("#rescheduleAppointmentModal").modal("toggle");},400);setTimeout(function(){window.location.href="./admin";
},1250);}else{$("#rescheduleButton-"+a).html("Error");$("#rescheduleButton-"+a).addClass("error-button");}});});}});}
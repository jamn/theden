$(document).ready(function(){$("#username").bind("keyup",function(){var b=$(this).val();$(this).val(b.replace(/\s+/g,""));});$(".recurringAppointmentAdminOptions").fadeOut();
$("#log").click(function(b){window.location.href="../admin/getLog";});$("#logout").click(function(b){window.location.href="../access/logout";});$("#loginButton").click(function(d){var b=$("#username").val();
var c=$("#password").val();window.location.href="../access/login?u="+b+"&p="+c;});$("#saveTextButton").click(function(c){var b=$("#homepageText").val();
$.ajax({type:"POST",url:"./saveHomepageMessage",data:{m:b}}).done(function(d){var e=d.search('"success":false');if(e===-1){console.log("success:true");
}else{console.log("success:false");}});});$("#password").keypress(function(d){var b=$("#username").val();var c=$("#password").val();if(d.keyCode===13){window.location.href="../access/login?u="+b+"&p="+c;
}});$("#chooseDateToBlockOff").datepicker({minDate:0});$("#fromWholeDay").datepicker({minDate:0});$("#toWholeDay").datepicker({minDate:0});$("#dateOfAppointment").datepicker({minDate:0});
$("#dateOfAppointment").datepicker("setDate",new Date());$("#blockOffTimeButton").click(function(d){var b=$("#chooseDateToBlockOff").val();var j=$("#fromHour").val();
var g=$("#fromMinute").val();var k=$("#fromMorningOrAfternoon").val();var f=$("#toHour").val();var l=$("#toMinute").val();var c=$("#toMorningOrAfternoon").val();
var i=j+":"+g+k;var h=f+":"+l+c;$("#blockOffTimeButton").html($("#waitingSpinner").html());$.ajax({type:"POST",url:"./blockOffTime",data:{date:b,from:i,to:h}}).done(function(e){var m=JSON.parse(e);
if(m.success===true){console.log("success:true");$("#blockOffTimeButton").html("Success");$("#blockOffTimeButton").removeClass("errorButton animated fadeIn");
}else{console.log("success:false");$("#blockOffTimeButton").html("Error");$("#blockOffTimeButton").addClass("errorButton animated fadeIn");}});});$("#blockOffDaysButton").click(function(b){var d=$("#fromWholeDay").val();
var c=$("#toWholeDay").val();$("#blockOffDaysButton").html($("#waitingSpinner").html());$.ajax({type:"POST",url:"./blockOffWholeDay",data:{from:d,to:c}}).done(function(e){var f=JSON.parse(e);
if(f.success===true){console.log("success:true");$("#blockOffDaysButton").html("Success");$("#blockOffDaysButton").removeClass("errorButton animated fadeIn");
}else{console.log("success:false");$("#blockOffDaysButton").html("Error");$("#blockOffDaysButton").addClass("errorButton animated fadeIn");}});});$("#recurringAppointment").click(function(){if($(this).is(":checked")){$(".recurringAppointmentAdminOptions").fadeIn();
}else{$(".recurringAppointmentAdminOptions").fadeOut();}});$("#bookForClientButton").confirmOn({classPrepend:"confirmon",questionText:"Book for client?",textYes:"Yes",textNo:"No"},"click",function(g,c){if(c){var j=$("#clients").val();
var f=$("#services").val();var d=$("#dateOfAppointment").val();var h=$("#timeSlots").val();var b=$("#recurringAppointment").is(":checked");var i=$("#repeatDuration").val();
var k=$("#repeatNumberOfAppointments").val();$("#bookForClientButton").html($("#waitingSpinner").html());$.ajax({type:"POST",url:"./bookForClient",data:{cId:j,sId:f,aDate:d,sTime:h,r:b,dur:i,num:k}}).done(function(e){var l=JSON.parse(e);
if(l.success===true){$("#bookForClientButton").html("Success");$("#bookForClientButton").removeClass("errorButton animated fadeIn");}else{$("#bookForClientButton").html("Error");
$("#bookForClientButton").addClass("errorButton animated fadeIn");}});}});$("#services").on("change",function(){a();});$("#dateOfAppointment").on("change",function(){a();
});function a(){var b=$("#services").val();var c=$("#dateOfAppointment").val();$.ajax({type:"POST",url:"./getTimeSlotOptions",data:{sId:b,aDate:c}}).done(function(d){if(d.indexOf("ERROR")>-1){$("#bookForClientButton").html("Error");
$("#bookForClientButton").addClass("errorButton animated fadeIn");}else{$("#timeSlots").html(d);$("#bookForClientButton").html("Book Appointment");$("#bookForClientButton").removeClass("errorButton animated fadeIn");
}});}$(".appointment-data").click(function(b){$(".edit-appointment").slideUp();var c=b.currentTarget.id;$.ajax({type:"POST",url:"./getRescheduleOptions",data:{aId:c}}).done(function(d){if(d.indexOf("ERROR")===-1){$("#edit-appointment-options-"+c).html(d);
$("#dateOfRescheduledAppointment-"+c).datepicker({minDate:0});$("#dateOfRescheduledAppointment-"+c).datepicker("setDate",new Date());$("#servicesForRescheduledAppointment-"+c).on("change",function(){getTimeSlotOptionsForRescheduledAppointment(c);
});$("#dateOfRescheduledAppointment-"+c).on("change",function(){getTimeSlotOptionsForRescheduledAppointment(c);});$("#rescheduleButton-"+c).on("click",function(){var f=$("#servicesForRescheduledAppointment-"+c).val();
var g=$("#dateOfRescheduledAppointment-"+c).val();var e=$("#timeSlotsForRescheduledAppointment-"+c).val();$(".spinner-"+c).fadeIn();$.ajax({type:"POST",url:"./rescheduleAppointment",data:{aId:c,sId:f,aDate:g,sTime:e}}).done(function(h){var i=JSON.parse(h);
if(i.success===true){$("#rescheduleButton-"+c).html("Success");$("#rescheduleButton-"+c).removeClass("errorButton animated fadeIn");setTimeout(function(){window.location.href="./";
},1250);}else{$("#rescheduleButton-"+c).html("Error");$("#rescheduleButton-"+c).addClass("errorButton animated fadeIn");}});});}});$(".edit-appointment-"+c).slideDown();
});$("#fourteenDayViewLink").click(function(b){var c=$("#fourteenDayViewLink").html();if(c==="14 day view"){$("#fourteenDayView-week1").slideDown();$("#fourteenDayView-week2").slideDown();
$("#fourteenDayViewLink").html("Hide 14 day view");}else{$("#fourteenDayView-week1").slideUp();$("#fourteenDayView-week2").slideUp();$("#fourteenDayViewLink").html("14 day view");
}});});function getTimeSlotOptionsForRescheduledAppointment(b){var a=$("#servicesForRescheduledAppointment-"+b).val();var c=$("#dateOfRescheduledAppointment-"+b).val();
$.ajax({type:"POST",url:"./getTimeSlotOptions",data:{sId:a,aDate:c}}).done(function(d){if(d.indexOf("ERROR")>-1){$("#timeSlotsForRescheduledAppointment-"+b).html("<option>No times available</option>");
}else{$("#timeSlotsForRescheduledAppointment-"+b).html(d);}});}$(".cancel-appointment-link").click(function(a){var b=$(this).attr("c");console.log(b);$.ajax({type:"POST",url:"./cancelAppointment",data:{c:b}}).done(function(c){var d=c.search('"success":false');
if(d===-1){console.log("success:true");alert("You did it, appoiment deleted!");location.reload();}else{alert("That didn't work. Dang.");console.log("success:false");
}});});
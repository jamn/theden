$(document).ready(function(){$("#username").bind("keyup",function(){var c=$(this).val();$(this).val(c.replace(/\s+/g,""));});$(".recurringAppointmentAdminOptions").fadeOut();
$("#log").click(function(c){window.location.href="../admin/getLog";});$("#logout").click(function(c){window.location.href="../access/logout";});$("#loginButton").click(function(f){var c=$("#username").val();
var d=$("#password").val();window.location.href="../access/login?u="+c+"&p="+d;});$("#saveTextButton").click(function(d){var c=$("#homepageText").val();
$.ajax({type:"POST",url:"./saveHomepageMessage",data:{m:c}}).done(function(e){var f=e.search('"success":false');if(f===-1){}else{}});});$("#password").keypress(function(f){var c=$("#username").val();
var d=$("#password").val();if(f.keyCode===13){window.location.href="../access/login?u="+c+"&p="+d;}});$("#clientsDetailsSelector").on("change",function(){var c=$(this).val();
$.ajax({type:"POST",url:"./getClientDetails",data:{cId:c}}).done(function(d){var e=d.search('"success":false');if(e===-1){$("#mask").fadeIn();$("#clientDetailsPopup").html(d).fadeIn();
}else{}});});$("#mask").click(function(c){b();});$(document).keyup(function(c){if(c.keyCode==27){b();}});function b(){$("#mask").fadeOut();$("#clientDetailsPopup").fadeOut();
}$("#chooseDateToBlockOff").datepicker({minDate:0});$("#fromWholeDay").datepicker({minDate:0});$("#toWholeDay").datepicker({minDate:0});$("#dateOfAppointment").datepicker({minDate:0});
$("#dateOfAppointment").datepicker("setDate",new Date());$("#blockOffTimeButton").click(function(f){var c=$("#chooseDateToBlockOff").val();var k=$("#fromHour").val();
var h=$("#fromMinute").val();var l=$("#fromMorningOrAfternoon").val();var g=$("#toHour").val();var m=$("#toMinute").val();var d=$("#toMorningOrAfternoon").val();
var j=k+":"+h+l;var i=g+":"+m+d;$("#blockOffTimeButton").html($("#waitingSpinner").html());$.ajax({type:"POST",url:"./blockOffTime",data:{date:c,from:j,to:i}}).done(function(e){var n=JSON.parse(e);
if(n.success===true){$("#blockOffTimeButton").html("Success");$("#blockOffTimeButton").removeClass("errorButton animated fadeIn");}else{$("#blockOffTimeButton").html("Error");
$("#blockOffTimeButton").addClass("errorButton animated fadeIn");}});});$("#blockOffDaysButton").click(function(c){var f=$("#fromWholeDay").val();var d=$("#toWholeDay").val();
$("#blockOffDaysButton").html($("#waitingSpinner").html());$.ajax({type:"POST",url:"./blockOffWholeDay",data:{from:f,to:d}}).done(function(e){var g=JSON.parse(e);
if(g.success===true){$("#blockOffDaysButton").html("Success");$("#blockOffDaysButton").removeClass("errorButton animated fadeIn");}else{$("#blockOffDaysButton").html("Error");
$("#blockOffDaysButton").addClass("errorButton animated fadeIn");}});});$("#recurringAppointment").click(function(){if($(this).is(":checked")){$(".recurringAppointmentAdminOptions").fadeIn();
}else{$(".recurringAppointmentAdminOptions").fadeOut();}});$("#bookForClientButton").confirmOn({classPrepend:"confirmon",questionText:"Book for client?",textYes:"Yes",textNo:"No"},"click",function(h,d){if(d){var k=$("#clients").val();
var g=$("#services").val();var f=$("#dateOfAppointment").val();var i=$("#timeSlots").val();var c=$("#recurringAppointment").is(":checked");var j=$("#repeatDuration").val();
var l=$("#repeatNumberOfAppointments").val();$("#bookForClientButton").html($("#waitingSpinner").html());$.ajax({type:"POST",url:"./bookForClient",data:{cId:k,sId:g,aDate:f,sTime:i,r:c,dur:j,num:l}}).done(function(e){var m=JSON.parse(e);
if(m.success===true){$("#bookForClientButton").html("Success");$("#bookForClientButton").removeClass("errorButton animated fadeIn");}else{$("#bookForClientButton").html("Error");
$("#bookForClientButton").addClass("errorButton animated fadeIn");}});}});$("#services").on("change",function(){a();});$("#dateOfAppointment").on("change",function(){a();
});function a(){var c=$("#services").val();var d=$("#dateOfAppointment").val();$.ajax({type:"POST",url:"./getTimeSlotOptions",data:{sId:c,aDate:d}}).done(function(e){if(e.indexOf("ERROR")>-1){$("#bookForClientButton").html("Error");
$("#bookForClientButton").addClass("errorButton animated fadeIn");}else{$("#timeSlots").html(e);$("#bookForClientButton").html("Book Appointment");$("#bookForClientButton").removeClass("errorButton animated fadeIn");
}});}$(".appointment-data").click(function(c){$(".edit-appointment").slideUp();var d=c.currentTarget.id;$.ajax({type:"POST",url:"./getRescheduleOptions",data:{aId:d}}).done(function(e){if(e.indexOf("ERROR")===-1){$("#edit-appointment-options-"+d).html(e);
$("#dateOfRescheduledAppointment-"+d).datepicker({minDate:0});$("#dateOfRescheduledAppointment-"+d).datepicker("setDate",new Date());$("#servicesForRescheduledAppointment-"+d).on("change",function(){getTimeSlotOptionsForRescheduledAppointment(d);
});$("#dateOfRescheduledAppointment-"+d).on("change",function(){getTimeSlotOptionsForRescheduledAppointment(d);});$("#rescheduleButton-"+d).on("click",function(){var g=$("#servicesForRescheduledAppointment-"+d).val();
var h=$("#dateOfRescheduledAppointment-"+d).val();var f=$("#timeSlotsForRescheduledAppointment-"+d).val();$(".spinner-"+d).fadeIn();$.ajax({type:"POST",url:"./rescheduleAppointment",data:{aId:d,sId:g,aDate:h,sTime:f}}).done(function(i){var j=JSON.parse(i);
if(j.success===true){$("#rescheduleButton-"+d).html("Success");$("#rescheduleButton-"+d).removeClass("errorButton animated fadeIn");setTimeout(function(){window.location.href="./";
},1250);}else{$("#rescheduleButton-"+d).html("Error");$("#rescheduleButton-"+d).addClass("errorButton animated fadeIn");}});});}});$(".edit-appointment-"+d).slideDown();
});$("#fourteenDayViewLink").click(function(c){var d=$("#fourteenDayViewLink").html();if(d==="14 day view"){$("#fourteenDayView-week1").slideDown();$("#fourteenDayView-week2").slideDown();
$("#fourteenDayViewLink").html("Hide 14 day view");}else{$("#fourteenDayView-week1").slideUp();$("#fourteenDayView-week2").slideUp();$("#fourteenDayViewLink").html("14 day view");
}});});function getTimeSlotOptionsForRescheduledAppointment(b){var a=$("#servicesForRescheduledAppointment-"+b).val();var c=$("#dateOfRescheduledAppointment-"+b).val();
$.ajax({type:"POST",url:"./getTimeSlotOptions",data:{sId:a,aDate:c}}).done(function(d){if(d.indexOf("ERROR")>-1){$("#timeSlotsForRescheduledAppointment-"+b).html("<option>No times available</option>");
}else{$("#timeSlotsForRescheduledAppointment-"+b).html(d);}});}$(".cancel-appointment-link").click(function(a){var b=$(this).attr("c");$.ajax({type:"POST",url:"./cancelAppointment",data:{c:b}}).done(function(c){var d=c.search('"success":false');
if(d===-1){alert("You did it, appoiment deleted!");location.reload();}else{alert("That didn't work. Dang.");}});});